#### 非同期処理

- とは、裏で行われる処理
- そして、時間がかかる処理！

#### 時間がかかる処理ってどんなのよ

- 通信、自分の端末とWebサーバの間には物理的に距離があるゆえ時間がかかる
- あと、ファイルの読み書きも。HDDやSSDにアクセスする時間がかかるのさ
- DB処理が関われば、サーバへの通信時間＋処理時間でさらに時間はかかる

#### ブロッキング・ノンブロッキング

- 時間のかかる処理はブロッキングなものとノンブロッキングなもの二種に分類される
- TypeScriptでは非同期処理＝時間がかかる処理＝ノンブロッキング
- 待ち時間もプログラムを実行し続けるため、複数クライアントに対応可能
- では、ブロッキングな処理とは…完了するまでプログラムが停止するような処理！
- 待ちの時間が生まれるので、結構タイムロス

#### シングルスレッドモデル

- TypeScriptでは時間かかる処理がブロッキングなのはあんま歓迎されない
- それは…実行モデルがシングルスレッドなため
- 分かりやすく言うと、プログラムの複数個所が同時に実行されることはない！ということ
  - TypeScriptは常にプログラムの一か所のみが実行されてため
  - シングルスレッドかつブロッキングな処理なんてされたら、クライアント一人の使用でプログラムの実行がストップしてしまう
-  なので！複数クライアントが接続しそうな通信処理はノンブロッキングであってほしい

####  ところで、シングルスレッドって結局並行処理できないのになんか意味あるのか？

- Node.jsは通信処理をOSにお願いすることで通信を実行している
- なので、待ち時間とはOSの処理を待つことである
- OSの処理は並行に行うことができる…そういうこと！

#### コールバック関数

- では、TypeScriptで非同期処理はどうやって行うか？色々あるけど、コールバック関数が使える
- コールバック関数とは、非同期処理が終わった後に呼び出される関数！
- ノンブロッキングな処理は勝手にノンストップで始まるが、その終了を待たずに次の処理がはじまってしまう。ので、こいつを使うことで終了を教えてあげるのさ
- `readline`も、文字が入力されるまで処理の実行を待ってくれたよね、こんな感じで`readline((入力値)=>{処理})`

#### タイマー

-　`setTimeout`関数でタイマーが使えるぜ、タイマーって一定時間後に特定の処理をする機能だぜ！